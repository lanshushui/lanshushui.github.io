---
title: 网络加载点9图的补充
categories: 
- 疑难杂症
tags:
- 点9图
---






 参考文档：

[对嘛！这才是从网络加载点9图的正确姿势](https://juejin.cn/post/7147458316103811108)

去看上面的文档了解，这个博客文只是些个人记录

目前方案是调用 AAPT 预处理完后再上传后台

## 开始

### 1.制作点9图

傻瓜式教程

[Android studio中.9图片的含义及制作教程](https://blog.csdn.net/sunbinkang/article/details/77331718)

### 2.AAPT命令

``` 
C:\Users\AppData\Local\Android\Sdk\build-tools\31.0.0\aapt.exe c -v -S  . -C .\9out
```

将该命令打包成cmd文件，与要处理的点9图处于同一个目录，运行即可（将aapt目录改为自己的对应目录）

上面命令调用AAPT处理资源，将有黑边的点9图转换为正常PNG



### 2.获得点9图对应的Bitmap

参考文档方案测试不行，因此我的处理是不让Glide生成Bitmap，只是下载文件，然后BitmapFactory转为Bitmap

``` kotlin
Glide.with(view)
.asFile()
.load(url)
.into(object :
      SimpleTarget<File>() {
          override fun onResourceReady(resource: File, p1: Transition<in File>?) {
              val bitmap = BitmapFactory.decodeFile(resource.absolutePath)
              val chunk = bitmap.ninePatchChunk
              val drawable = if (NinePatch.isNinePatchChunk(chunk)) {
                  NinePatchDrawable(context.resources, bitmap, chunk, Rect(), null)
              } else {
                  BitmapDrawable(context.resources, bitmap)
              }
              bgView.setImageDrawable(drawable)
          }
      })
```



Keep Moving Forward
