---
title: 泛型知识点
categories:
  - 知识点
tags:
  - 泛型
abbrlink: 71d175cf
---



[“界限”带来的灵活性 —— Java泛型的上下界](https://juejin.cn/post/7022581523048038408)

[Kotlin 范型之泛型约束、类型投影、星号投影](https://www.jianshu.com/p/ce9b093f6967)



## 1.上界: Extend（ out ）  下界：Super( in )

> extend（ out ） ------------------  只能取，不能存

```java
public void a(){
    List<Apple> appleList = new ArrayList<>();
    appleList.add(new Apple());
    appleList.add(new Apple());
	//如果能存Fruit的子类 ，万一你存的是banana ，appleList.get()方法就崩溃了
    List<? extends Fruit> plate = appleList;
    Fruit fruit = plate.get(0);
}
```



> *super( in )          ------------------  只能存，不能取（其实也能取，取到的都是Object）*

```java
public void a(){
    List<Fruit> fruitList = new ArrayList<>();
    fruitList.add(new Apple());
    fruitList.add(new Banana());

    //fruitList里面存着Banana，applePlate调用get方法，编译器也不知道返回你什么，是返回Apple类还是Banana类
    List<? super Apple> applePlate = fruitList;
    applePlate.add(new Apple());
    applePlate.add(new RedApple());
    applePlate.add(new GreenApple());
}
```

**别搞蒙了 super不是指能存入Apple的父类，是指能存入Apple的子类。这和重写父类方法的super不一样。**



## 2. Java 语言中，数组是协变的,泛型不是协变的

```java
public void a(){
    Integer[] c=new Integer[10];
    Number[] d=c;
}
//上面的代码是支持的

//下面的代码是不允许的
public void b(){
    ArrayList<Integer> c=new ArrayList();
    ArrayList<Number> d=c;
}
```



## 3.各个场景

```java
------------------------------------------------------------------------------------------------------------------------------
//类场景

//允许的代码
public class Test<T> {
    
}
//允许的代码
public class Test<T extends Activity> {
    
}
public class Test<T ：Activity> {
    
}
//不允许的代码
public class Test<T super Activity> {

}
//不允许的代码
public class Test<? extends Activity> {
    
}
//不允许的代码
public class Test<? super Activity> {

}

//允许的代码
abstract class Source<out T> {
    abstract fun func(): T
}
//允许的代码
abstract class Comparable<in T> {
    abstract fun func(t: T)
}

------------------------------------------------------------------------------------------------------------------------------
//变量场景

//允许的代码
ArrayList<? extends String> list= new ArrayList();
val list:ArrayList<out String> = ArrayList<String>()

//允许的代码
ArrayList<? super String> list= new ArrayList();
val list:ArrayList<in String> = ArrayList<String>()
    
//允许的代码
ArrayList<?> list= new ArrayList<String>();
val list:ArrayList<*> = ArrayList<String>()
    
//不允许的代码
ArrayList list= new ArrayList<? extends String>();
ArrayList list= new ArrayList<out String>();

```

【?】**【? extends XXX】  和   【? super XXX】只能用在变量引用的泛型上**



## 4.无界类型通配符`?`, Kotlin 使用星号投影`*`



```java
//java    ? 相当于? extend Object   只能get不能set
ArrayList<?> list= new ArrayList<String>();
Object a=list.get(0);
//kotlin     * 相当于 out Any?   只能get不能set
val list:ArrayList<*> = ArrayList<String>()
val any= list.get(0)
```



Keep Moving Forward
